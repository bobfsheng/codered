1. create init
2. chg red nodepkg

Execution failed for task ':app:checkDebugAarMetadata'.
> A failure occurred while executing com.android.build.gradle.internal.tasks.CheckAarMetadataWorkAction > 2 issues were found when checking AAR metadata: 1. Dependency 'androidx.browser:browser:1.9.0-alpha02' requires libraries and applications that depend on it to compile against version 36 or later of the Android APIs. :app is currently compiled against android-35. Also, the maximum recommended compile SDK version for Android Gradle plugin 8.8.0 is 35. Recommended action: Update this project's version of the Android Gradle plugin to one that supports 36, then update this project to use compileSdk of at least 36. Note that updating a library or application's compileSdk (which allows newer APIs to be used) can be done separately from updating targetSdk (which opts the app in to new runtime behavior) and minSdk (which determines which devices the app can be installed on). 2. Dependency 'androidx.browser:browser:1.9.0-alpha02' requires Android Gradle plugin 8.9.1 or higher. This build currently uses Android Gradle plugin 8.


3. change app build.gradle

--- app/build.gradle.......
84a85
>         missingDimensionStrategy 'store', 'play'
112a114
>     implementation 'androidx.browser:browser:1.8.0' // or lower

119a122,129
>
>
> configurations.all {
>     resolutionStrategy {
>         force 'androidx.browser:browser:1.8.0'
      }
}

New error: A failure occurred while executing com.android.build.gradle.internal.tasks.CheckDuplicatesRunnable > 

Duplicate class android.support.v4.app.INotificationSideChannel found in modules core-1.13.1.aar -> core-1.13.1-runtime (androidx.core:core:1.13.1) and support-compat-26.1.0.aar -> support-compat-26.1.0-runtime (com.android.support:support-compat:26.1.0) 

root cause: react-native-splash-screen uses com.android.support, and many classes exists in both0

4. solution: migrate to react-native-bootsplash,  4.3 ~ 4.5 wait until np-src in red

4.1. npm uninstall react-native-splash-screen
4.2. npm install react-native-bootsplash ;  npx pod-install
4.3. npx react-native generate-bootsplash
4.3.1. create or edit android/app/src/main/res/values/styles.xml

<resources>
    <style name="BootSplashTheme" parent="Theme.SplashScreen">
        <item name="windowSplashScreenBackground">#ffffff</item>
        <item name="postSplashScreenTheme">@style/AppTheme</item>
    </style>
</resources>

4.3.2. update AndroidMainfest.xml

<activity
  android:name=".MainActivity"
  android:theme="@style/BootSplashTheme"
  ... />



4.4. MainActivity.java:
import com.zoontek.rnbootsplash.RNBootSplash; // add this import

@Override
protected void onCreate(Bundle savedInstanceState) {
  RNBootSplash.init(this, R.style.BootSplashTheme)
  super.onCreate(savedInstanceState);
}

or MainActivity.kt

  override fun onCreate(savedInstanceState: Bundle?) {
    RNBootSplash.init(this, R.style.BootSplashTheme) // ðŸ‘ˆ initialize bootsplash *before* super.onCreate
    super.onCreate(savedInstanceState)
  }

4.5. App.tsx
import RNBootSplash from "react-native-bootsplash";

useEffect(() => {
  RNBootSplash.hide({ fade: true }); // hide after app loads
}, []);

after 4.1 ~ 4.2 duplicated class error gone! But after lauched in emulator, don't see the app runing - maybe related to the package of splash screen. 


after 4.3 ~ 4.4, re-install npm package, "gradle clean" --> New error: kotling compiling error related to splash screen

5. so far:

bobsheng@Bobs-MacBook-Pro codered % ver.sh andr2                                                                                             
***** andr2 nodepkg ---> red
***** andr2 jsconfig ---> orig
***** andr2 gradles ---> orig
***** andr2 jssource ---> orig
***** andr2 android ~~~> orig

bobsheng@Bobs-MacBook-Pro codered % ver.sh andr2 android -v                                                                              
***** andr2 android ~~~> orig
--- diff detail......
Files chgfile/orig_android_src/main/AndroidManifest.xml and andr2/android/app/src/main/AndroidManifest.xml differ
Files chgfile/orig_android_src/main/java/com/andr2/MainActivity.kt and andr2/android/app/src/main/java/com/andr2/MainActivity.kt differ
Files chgfile/orig_android_src/main/res/values/styles.xml and andr2/android/app/src/main/res/values/styles.xml differ
Only in andr2/android/app/src/main/res/values: styles.orig.xml


bobsheng@Bobs-MacBook-Pro codered % diff chgfile/orig_android_src/main/AndroidManifest.xml andr2/android/app/src/main/AndroidManifest.xml
14a15
>         android:theme="@style/BootSplashTheme"

bobsheng@Bobs-MacBook-Pro codered % diff chgfile/orig_android_src/main/java/com/andr2/MainActivity.kt andr2/android/app/src/main/java/com/andr2/MainActivity.kt
2a3,4
> import android.os.Bundle
> import com.zoontek.rnbootsplash.RNBootSplash
9a12,16
>   override fun onCreate(savedInstanceState: Bundle?) {
>     RNBootSplash.init(this, R.style.BootSplashTheme) // ðŸ‘ˆ initialize bootsplash *before* super.onCreate
>     super.onCreate(savedInstanceState)
>   }
> 

bobsheng@Bobs-MacBook-Pro codered % diff chgfile/orig_android_src/main/res/values/styles.xml andr2/android/app/src/main/res/values/styles.xml
2,6c2,4
< 
<     <!-- Base application theme. -->
<     <style name="AppTheme" parent="Theme.AppCompat.DayNight.NoActionBar">
<         <!-- Customize your theme here. -->
<         <item name="android:editTextBackground">@drawable/rn_edit_text_material</item>
---
>     <style name="BootSplashTheme" parent="Theme.SplashScreen">
>         <item name="windowSplashScreenBackground">#ffffff</item>
>         <item name="postSplashScreenTheme">@style/AppTheme</item>
8d5
< 

error Failed to install the app. Command failed with exit code 1: ./gradlew app:installDebug -PreactNativeDevServerPort=8081 FAILURE: Build failed with an exception. * What went wrong:
Execution failed for task ':app:processDebugResources'.
> A failure occurred while executing com.android.build.gradle.internal.res.LinkApplicationAndroidResourcesTask$TaskAction 
> Android resource linking failed error: resource style/Theme.SplashScreen (aka com.andr2:style/Theme.SplashScreen) not found. 
com.andr2.app-mergeDebugResources-60:/values/values.xml:5336: error: style attribute 'attr/windowSplashScreenBackground 
  (aka com.andr2:attr/windowSplashScreenBackground)' not found. 
com.andr2.app-mergeDebugResources-60:/values/values.xml:5337: 
error: style attribute 'attr/postSplashScreenTheme (aka com.andr2:attr/postSplashScreenTheme)' not found. 
error: failed linking references. 

